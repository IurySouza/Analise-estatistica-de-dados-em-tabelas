<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0 shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-giJF6kkoqNQ00vy+HMDP7azOuL0xtbfIcaT9wjKHr8RbDVddVHyTfAAsrekwKmP1" crossorigin="anonymous">

    <style>
        .custom-file-download {
            border: 1px solid #ccc;
            display: inline-block;
            padding: 6px 12px;
            cursor: pointer;
        }
    </style>

    <title>Editar</title>
</head>

<body>
    <nav class="navbar navbar-expand-lg navbar-light bg-success">
        <div class="container-fluid">
            <a class="navbar-brand text-white">
                <%= data.filename %>
            </a>

            <ul class="navbar-nav">
                <li class="nav-item me-2">
                    <div class="d-flex btn btn-light" data-bs-toggle="modal" data-bs-target="#exampleModal"
                        type="button" style="background-color: white; border-radius: 4px;">
                        <img src="delete.svg">
                        <h5 class="px-1 py-1">Deletar</h5>
                    </div>
                </li>

                <li class="nav-item me-2">
                    <form action="/editar/baixar" method="post">
                        <input type="hidden" name="id" value=<%=data.id %>>
                        <button type="submit" class="d-flex btn btn-light"
                            style="background-color: white; border-radius: 4px;">
                            <img src="download.svg" />
                            <h5 class="px-1 py-1">Download</h5>
                        </button>
                    </form>
                </li>

                <li class="nav-item me-2">
                    <form action="/editar/estatistica" method="get">
                        <button type="submit" class="d-flex btn btn-light" style="background-color: white; border-radius: 4px;">
                            <h5 class="px-1 py-1">Análise</h5>
                        </button>
                    </form>
                </li>
            </ul>
        </div>
    </nav>

    <div class="container">
        <div class="row">
            <div class="col-md-2"></div>
            <div class="col-md-8">
                <div class="card card-body mt-3">
                    <form action="/editar/atualizar" method="post">
                        <label class="text-xl-left">Digite o <label class="text-success">número</label> da linha e o
                            <label class="text-success">nome</label> da coluna</label>.
                        <p>As linhas começam a ser contadas em 1.</p>
                        <div class="d-flex">
                            <input type="hidden" name="id" value=<%=data.id %>>
                            <input class="m-3 form-control form-control-lg" type="text" placeholder="Insira a linha"
                                name="linha" />
                            <input class="m-3 form-control form-control-lg" type="text" placeholder="Insira a coluna"
                                name="coluna" />
                            <input class="m-3 form-control form-control-lg" type="text"
                                placeholder="Insira o novo valor" name="value" />
                            <button type="submit" class="m-3 btn btn-success">Atualizar</button>
                        </div>
                    </form>
                </div>
            </div>
            <div class="col-md-2"></div>
        </div>
    </div>

    <div class="mt-3">
        <table class="table table-striped table-hover table-sm">
            <thead style="background-color: #00753b; color: white;">
                <tr>
                    <th scope="col" class="table-dark">
                        1
                    </th>
                    <% for (let i in data.keys) { %>
                        <% if (data.keys[i] !='__EMPTY' ) { %>
                            <th scope="col" class="pe-4">
                                <%= data.keys[i] %>
                            </th>
                            <% } else { %>
                                <th scope="col" class="pe-4">
                                    <%= %>
                                </th>
                                <% } %>
                                    <% } %>
                </tr>
            </thead>

            <tbody>
                <% let z=2 %>
                    <% for (let i=0; i < data.nrows; i++) { %>
                        <tr>
                            <td scope="col" class="table-dark">
                                <%= z %>
                                    <% z++ %>
                            </td>
                            <% for (let j=0; j < data.nkeys; j++) { %>
                                <td>
                                    <%= data.cell[i][j].value %>
                                </td>
                                <% } %>
                        </tr>
                        <% } %>
            </tbody>
        </table>
    </div>

    <div class="modal" tabindex="-1" id="exampleModal">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Deseja deletar a tabela?</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <p>Se você deletar essa tabela do site, ela não poderá ser
                        recuperada posteriormente! Cuidado!</p>
                </div>
                <div class="modal-footer">
                    <form action="/editar/deletar" method="post">
                        <button class="btn btn-danger" type="submit">
                            Deletar
                        </button>
                    </form>
                    <button type="button" class="btn btn-primary" data-bs-dismiss="modal">
                        Cancelar
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-ygbV9kiqUc6oa4msXn9868pTtWMgiQaeYH7/t7LECLbyPA2x65Kgf80OJFdroafW"
        crossorigin="anonymous"></script>

</body>

</html>